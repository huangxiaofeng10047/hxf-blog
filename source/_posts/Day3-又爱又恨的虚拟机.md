---
title: Day3 又爱又恨的虚拟机
date: 2021-08-30 12:57:43
tags:
- devops
categories: 
- devops
---

昨天看了三个「虚拟机」的机器服务架构，但其实昨天说的第三个架构(微服务时代)，仍然有不少隐性的问题：

<!--more-->  

## 

-   浪费机器资源：但是每次开一台虚拟机时,总是需要浪费一点资源提供给系统使用,且每一个服务本身都还需要保有备援机器，以防主要服务loading过高或者机器死亡，保持随时可以救援状态。  
    
-   高成本：所以当「虚拟机」数量过多时，也容易造成互相抢夺实体机器资源的情况。为了避免有这样的情况发生，只好不断的购买实体机器，避免「虚拟机」互抢资源。  
    
-   管理不便：假设每个服务都有三台虚拟机(两台在线上做负载平衡，一台作为备援机器)，当你有10个线上服务就会有30台虚拟机，但是刚刚只有提到线上服务机器，也许你会有「测试环境」的机器+ 「开发环境」的机器，这一些加一加10个服务可能就具备将近50台虚拟机器。  
    
    而且当机器建制是由不同人经手时，难免会有一些些差异，这是最容易导致服务异常却又难以找bug的问题。时常会有莫名其妙的特例问题发生，导致时常会听到工程师在抱怨，环境不一致所以有些bug在测试环境无法顺利测试。
    
-   版本升级不容易：有可能会因为建制过程中某些套件版本过于老旧，或者资安问题不得不被迫升级版本，这时候就得更改code撰写方式，为了配合新机器版本，本机套件跟作业系统也必须跟着升级，避免版本落差导致服务上至开发环境才发现异常，大多时间往往浪费在这时候。  
    

**当然还有更多的不便利性，但就光是以上几点项目，加上管理的机器数量庞大，就足以每天都反覆处理类似的问题，虽然培养出打指令速度很快，但却总是重复着相同行为，在工作上也渐渐失去热忱。**

___

**因此接下来要介绍一个容器架构,但是此架构仍不是最好版本，可以思考一下以下架构解决的什么问题，但是又有什么问题尚未解决，答案明天揭晓。**

![image-20210830130017768](https://gitee.com/hxf88/imgrepo/raw/master/img/image-20210830130017768.png)
